include:
  - ./src/compose.yaml
services:
  agentgateway:
    image: ghcr.io/agentgateway/agentgateway
    ports:
      - 3000:3000
      - 15000:15000
    volumes:
      - ./services_configs/agentgateway:/app/configs
      # - /home/michael/.aws:/root/.aws #WORKS
    environment:
      - ADMIN_ADDR=0.0.0.0:15000 # https://github.com/agentgateway/agentgateway/pull/165
    env_file: ".env"
    # command: -f /app/configs/hello-http-config.yaml
    # command: -f /app/configs/sse-config.yaml
    # command: -f /app/configs/mcp_server-config.yaml
    command: -f /app/configs/ai-config.yaml
    extra_hosts:
      - "host.docker.internal:host-gateway"
  mcp-everything:
    image: tzolov/mcp-everything-server:v2 # By default runs in streamableHttp mode - https://github.com/tzolov/mcp-everything-server-docker-image/tree/main
    command: ["node", "dist/index.js", "sse"]
    ports:
      - 3001:3001
    # entrypoint: ["executable", "arg"]
  mcp-inspector:
    image: ghcr.io/modelcontextprotocol/inspector:latest
    network_mode: "host" # https://docs.docker.com/reference/compose-file/services/#network_mode
    environment:
      - HOST=0.0.0.0
      - DANGEROUSLY_OMIT_AUTH=true
    ports: 
      - 6274:6274
      - 6277:6277
  echo:
    image: jmalloc/echo-server
    ports: 
      - "8080:8080"
  
  ollama:
    image: docker.io/ollama/ollama:latest
    hostname: ollama.server
    ports:
      - 7869:11434
    volumes:
      - .:/code
      - ./services_configs/ollama/data:/root/.ollama
    # entrypoint: ["/bin/sh", "-c", "echo 'Hello Ollama Server' && ollama serve & ollama run llama3.1] # start from another model if needed https://ollama.com/search
    container_name: ollama
    restart: always
    environment:
      - OLLAMA_KEEP_ALIVE=24h
      - OLLAMA_HOST=0.0.0.0
      - OLLAMA_DEBUG=1
    profiles: [ollama]
  # ollama-model:
  #   image: docker.io/ollama/ollama:latest
  #   command: pull deepseek-r1:1.5b
  #   volumes:
  #     - ./services_configs/ollama/data:/root/.ollama
  #   depends_on:
  #     - ollama
  #   # other configuration...