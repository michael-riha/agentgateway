binds:
- port: 3000
  listeners:
  - protocol: HTTP
    name: echo Listener
    routes:
    - matches:
      - path:
          pathPrefix: /
      name: direct-response
      policies:
        directResponse:
          body: hello!
          status: 200
    - hostnames: []
      matches:
      - path:
          pathPrefix: /ollama
      policies:
        # strip-path
        urlRewrite:
          path:
            prefix: ''
        # urlRewrite:
        #   authority:
        #     full: ollama.server
        #   path:
        #     full: "v1/chat/completions"
      backends:
      - ai:
          name: ollama
          hostOverride: ollama.server:11434
          provider:
            openAI:
              model: llama3.1 # deepseek-r1:1.5b
      name: ollama
    - hostnames: []
      matches:
      - path:
          pathPrefix: /bedrock
      backends:
      - ai:
          provider:
            bedrock:
              model: anthropic.claude-3-5-sonnet-20240620-v1:0
              region: us-west-2
      name: bedrock
    - matches:
      - path:
          pathPrefix: /graph
      policies:
        cors:
          allowOrigins:
          - "*"
          allowHeaders:
          - "*"
        # strip-path
        urlRewrite:
          path:
            prefix: ''
      backends:
      - mcp:
          targets:
          - name: mcp-server
            mcp:
              host: mcp-server
              port: 8000
              path: /mcp
    # - matches:
    #   - path:
    #       pathPrefix: /ui
    #   policies:
    #     cors:
    #       allowOrigins:
    #       - "*"
    #       allowHeaders:
    #       - "*"
    #     # strip-path
    #     urlRewrite:
    #       path:
    #         prefix: ''
    #   backends:
    #   - host: 127.0.0.1
    #     port: 15000
    #     path: /ui

